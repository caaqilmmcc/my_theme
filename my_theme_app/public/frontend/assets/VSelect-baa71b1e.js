var J=Object.defineProperty,X=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var A=(e,u,a)=>u in e?J(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a,V=(e,u)=>{for(var a in u||(u={}))ae.call(u,a)&&A(e,a,u[a]);if(R)for(var a of R(u))le.call(u,a)&&A(e,a,u[a]);return e},E=(e,u)=>X(e,ee(u));import{m as te,V as K}from"./VTextField-85f8d610.js";import{f as ne}from"./forwardRefs-bb5e4b03.js";import{aG as oe,aB as ue,bw as se,as as ie,aA as re,aF as ce,k as b,aD as M,D as F,az as de,p as r,F as fe,Z as g,bl as me,Q as ve,aK as pe}from"./index-3d65e1d5.js";import{m as he,u as ye,V as Ve,a as U}from"./VList-8244b403.js";import{m as ke}from"./transition-a7abc3a3.js";import{b as Ce}from"./VInput-520171d3.js";import{V as ge}from"./dialog-transition-b0c9e904.js";import{V as we}from"./VMenu-ef1e62a9.js";import{V as De}from"./VCheckboxBtn-e4cee54f.js";import{V as xe}from"./VChip-566276cc.js";const Pe=oe(V({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:se}},he({itemChildren:!1})),"v-select"),Ee=ie()({name:"VSelect",props:V(V(V({},Pe()),re(te({modelValue:null}),["validationValue","dirty","appendInnerIcon"])),ke({transition:{component:ge}})),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,u){let{slots:a}=u;const{t:N}=ce(),I=b(),S=b(),T=M(e,"menu"),c=F({get:()=>T.value,set:l=>{var n;T.value&&!l&&((n=S.value)!=null&&n.Î¨openChildren)||(T.value=l)}}),{items:k,transformIn:H,transformOut:$}=ye(e),s=M(e,"modelValue",[],l=>H(pe(l)),l=>{var i;const n=$(l);return e.multiple?n:(i=n[0])!=null?i:null}),h=Ce(),w=F(()=>s.value.map(l=>k.value.find(n=>e.valueComparator(n.value,l.value))||l)),_=F(()=>w.value.map(l=>l.props.value)),C=b(!1);let B="",O;const L=F(()=>e.hideSelected?k.value.filter(l=>!w.value.some(n=>n===l)):k.value),y=b();function z(l){e.openOnClear&&(c.value=!0)}function j(){e.hideNoData&&!k.value.length||e.readonly||h!=null&&h.isReadonly.value||(c.value=!c.value)}function q(l){var t,f,v,m;if(e.readonly||h!=null&&h.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(c.value=!0),["Escape","Tab"].includes(l.key)&&(c.value=!1),l.key==="ArrowDown"?(t=y.value)==null||t.focus("next"):l.key==="ArrowUp"?(f=y.value)==null||f.focus("prev"):l.key==="Home"?(v=y.value)==null||v.focus("first"):l.key==="End"&&((m=y.value)==null||m.focus("last"));const n=1e3;function i(o){const p=o.key.length===1,d=!o.ctrlKey&&!o.metaKey&&!o.altKey;return p&&d}if(e.multiple||!i(l))return;const x=performance.now();x-O>n&&(B=""),B+=l.key.toLowerCase(),O=x;const P=k.value.find(o=>o.title.toLowerCase().startsWith(B));P!==void 0&&(s.value=[P])}function D(l){if(e.multiple){const n=_.value.findIndex(i=>e.valueComparator(i,l.value));if(n===-1)s.value=[...s.value,l];else{const i=[...s.value];i.splice(n,1),s.value=i}}else s.value=[l],c.value=!1}function G(l){var n;(n=y.value)!=null&&n.$el.contains(l.relatedTarget)||(c.value=!1)}function Q(l){C.value=!0}function W(l){var n;l.relatedTarget==null&&((n=I.value)==null||n.focus())}return de(()=>{const l=!!(e.chips||a.chip),n=!!(!e.hideNoData||L.value.length||a.prepend||a.append||a["no-data"]),i=s.value.length>0,[x]=K.filterProps(e),P=i||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(K,g({ref:I},x,{modelValue:s.value.map(t=>t.props.value).join(", "),"onUpdate:modelValue":t=>{t==null&&(s.value=[])},focused:C.value,"onUpdate:focused":t=>C.value=t,validationValue:s.externalValue,dirty:i,class:["v-select",{"v-select--active-menu":c.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:P,"onClick:clear":z,"onMousedown:control":j,onBlur:G,onKeydown:q}),E(V({},a),{default:()=>r(fe,null,[r(we,g({ref:S,modelValue:c.value,"onUpdate:modelValue":t=>c.value=t,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[n&&r(Ve,{ref:y,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:t=>t.preventDefault(),onFocusin:Q,onFocusout:W},{default:()=>{var t,f,v,m;return[!L.value.length&&!e.hideNoData&&((f=(t=a["no-data"])==null?void 0:t.call(a))!=null?f:r(U,{title:N(e.noDataText)},null)),(v=a["prepend-item"])==null?void 0:v.call(a),L.value.map((o,p)=>{var d;return a.item?(d=a.item)==null?void 0:d.call(a,{item:o,index:p,props:g(o.props,{onClick:()=>D(o)})}):r(U,g({key:p},o.props,{onClick:()=>D(o)}),{prepend:Y=>{let{isSelected:Z}=Y;return e.multiple&&!e.hideSelected?r(De,{modelValue:Z,ripple:!1,tabindex:"-1"},null):void 0}})}),(m=a["append-item"])==null?void 0:m.call(a)]}})]}),w.value.map((t,f)=>{var o,p;function v(d){d.stopPropagation(),d.preventDefault(),D(t)}const m={"onClick:close":v,modelValue:!0,"onUpdate:modelValue":void 0};return r("div",{key:t.value,class:"v-select__selection"},[l?a.chip?r(me,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>{var d;return[(d=a.chip)==null?void 0:d.call(a,{item:t,index:f,props:m})]}}):r(xe,g({key:"chip",closable:e.closableChips,size:"small",text:t.title},m),null):(p=(o=a.selection)==null?void 0:o.call(a,{item:t,index:f}))!=null?p:r("span",{class:"v-select__selection-text"},[t.title,e.multiple&&f<w.value.length-1&&r("span",{class:"v-select__selection-comma"},[ve(",")])])])})])}))}),ne({isFocused:C,menu:c,select:D},I)}});export{Ee as V,Pe as m};
