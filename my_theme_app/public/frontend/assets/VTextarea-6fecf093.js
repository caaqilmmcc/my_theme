var ue=Object.defineProperty,ie=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var E=(e,n,a)=>n in e?ue(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,V=(e,n)=>{for(var a in n||(n={}))G.call(n,a)&&E(e,a,n[a]);if(C)for(var a of C(n))U.call(n,a)&&E(e,a,n[a]);return e},R=(e,n)=>ie(e,re(n));var S=(e,n)=>{var a={};for(var l in e)G.call(e,l)&&n.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&C)for(var l of C(e))n.indexOf(l)<0&&U.call(e,l)&&(a[l]=e[l]);return a};import{as as se,aD as ce,D as B,k as h,aQ as de,Y as y,aP as fe,az as ve,aE as me,p as r,Z as M,F as N,K as O,bk as xe,c5 as ge,ba as p,bX as Ve,ay as he,bR as ye}from"./index-6e9ab8b8.js";/* empty css                   */import{m as we,f as Fe,V as Ce}from"./VField-f5a6d12c.js";import{m as Pe,u as ke,a as $}from"./VInput-9f585516.js";import{I as Ie}from"./VImg-5111e2cf.js";import{f as be}from"./forwardRefs-bb5e4b03.js";import{V as Re}from"./VCounter-76d6d7ad.js";const Te=se()({name:"VTextarea",directives:{Intersect:Ie},inheritAttrs:!1,props:V(V({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object},Pe()),we()),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:l,slots:c}=n;const s=ce(e,"modelValue"),{isFocused:m,focus:j,blur:K}=ke(e),Q=B(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),X=B(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function Y(t,u){var o,i;!e.autofocus||!t||(i=(o=u[0].target)==null?void 0:o.focus)==null||i.call(o)}const z=h(),w=h(),D=h(""),F=h(),Z=B(()=>m.value||e.persistentPlaceholder);function P(){var t;F.value!==document.activeElement&&((t=F.value)==null||t.focus()),m.value||j()}function q(t){P(),l("click:control",t)}function J(t){l("mousedown:control",t)}function L(t){t.stopPropagation(),P(),p(()=>{s.value="",Ve(e["onClick:clear"],t)})}function W(t){var o;const u=t.target;if(s.value=u.value,(o=e.modelModifiers)!=null&&o.trim){const i=[u.selectionStart,u.selectionEnd];p(()=>{u.selectionStart=i[0],u.selectionEnd=i[1]})}}const f=h();function v(){e.autoGrow&&p(()=>{if(!f.value||!w.value)return;const t=getComputedStyle(f.value),u=getComputedStyle(w.value.$el),o=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),i=f.value.scrollHeight,k=parseFloat(t.lineHeight),I=Math.max(parseFloat(e.rows)*k+o,parseFloat(u.getPropertyValue("--v-input-control-height"))),b=parseFloat(e.maxRows)*k+o||1/0;D.value=he(ye(i!=null?i:0,I,b))})}de(v),y(s,v),y(()=>e.rows,v),y(()=>e.maxRows,v),y(()=>e.density,v);let d;return y(f,t=>{t?(d=new ResizeObserver(v),d.observe(f.value)):d==null||d.disconnect()}),fe(()=>{d==null||d.disconnect()}),ve(()=>{const t=!!(c.counter||e.counter||e.counterValue),u=!!(t||c.details),[o,i]=me(a),[Se]=$.filterProps(e),H=Se,{modelValue:k}=H,I=S(H,["modelValue"]),[b]=Fe(e);return r($,M({ref:z,modelValue:s.value,"onUpdate:modelValue":x=>s.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)},e.class],style:e.style},o,I,{focused:m.value}),R(V({},c),{default:x=>{let{isDisabled:g,isDirty:_,isReadonly:ee,isValid:te}=x;return r(Ce,M({ref:w,style:{"--v-textarea-control-height":D.value},onClick:q,onMousedown:J,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},b,{active:Z.value||_.value,dirty:_.value||e.dirty,disabled:g.value,focused:m.value,error:te.value===!1}),R(V({},c),{default:ae=>{let{props:le}=ae,A=le,{class:T}=A,ne=S(A,["class"]);return r(N,null,[e.prefix&&r("span",{class:"v-text-field__prefix"},[e.prefix]),O(r("textarea",M({ref:F,class:T,value:s.value,onInput:W,autofocus:e.autofocus,readonly:ee.value,disabled:g.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:P,onBlur:K},ne,i),null),[[xe("intersect"),{handler:Y},null,{once:!0}]]),e.autoGrow&&O(r("textarea",{class:[T,"v-textarea__sizer"],"onUpdate:modelValue":oe=>s.value=oe,ref:f,readonly:!0,"aria-hidden":"true"},null),[[ge,s.value]]),e.suffix&&r("span",{class:"v-text-field__suffix"},[e.suffix])])}}))},details:u?x=>{var g;return r(N,null,[(g=c.details)==null?void 0:g.call(c,x),t&&r(N,null,[r("span",null,null),r(Re,{active:e.persistentCounter||m.value,value:Q.value,max:X.value},c.counter)])])}:void 0}))}),be({},z,w,F)}});export{Te as V};
